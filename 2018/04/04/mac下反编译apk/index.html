<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> mac下反编译apk · reezon</title><meta name="description" content="mac下反编译apk - reezon"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://reezon.github.io/atom.xml" title="reezon"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/reezon" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">mac下反编译apk</h1><div class="post-info">Apr 4, 2018</div><div class="post-content"><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ul>
<li>apktool：用于反编译apk文件</li>
<li>dex2jar：用于将反编译出的class.dex转换成classes-dex2jar.jar</li>
<li>jd-gui：用于阅读classes-dex2jar.jar源码</li>
<li>signAPK：给重新打包后的apk签名</li>
</ul>
<h3 id="安装apktool"><a href="#安装apktool" class="headerlink" title="安装apktool"></a>安装apktool</h3><p>安装地址：<br><a href="https://ibotpeaches.github.io/Apktool/install/" target="_blank" rel="noopener">https://ibotpeaches.github.io/Apktool/install/</a></p>
<p>根据教程将apktool安装好即可。</p>
<p>注意：需要先安装java sdk。<br>下载地址：<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk9-downloads-3848520.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/java/javase/downloads/jdk9-downloads-3848520.html</a></p>
<h3 id="安装dex2jar"><a href="#安装dex2jar" class="headerlink" title="安装dex2jar"></a>安装dex2jar</h3><p>下载并解压dex2jar-2.0<br>为dex2jar-2.0添加权限<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ chmod -R 777 dex2jar-2.0</span><br><span class="line">$ chmod +x d2j_invoke.sh</span><br></pre></td></tr></table></figure></p>
<h3 id="安装jd-gui"><a href="#安装jd-gui" class="headerlink" title="安装jd-gui"></a>安装jd-gui</h3><p>使用brew安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew cask install jd-gui</span><br></pre></td></tr></table></figure></p>
<p>注意：只能运行在jdk 1.8版本下。否则按照此文档对jdk版本进行更改：<a href="http://blog.csdn.net/YoungStunner/article/details/78699864" target="_blank" rel="noopener">http://blog.csdn.net/YoungStunner/article/details/78699864</a></p>
<h2 id="反编译流程"><a href="#反编译流程" class="headerlink" title="反编译流程"></a>反编译流程</h2><h3 id="使用apktool反编译apk包"><a href="#使用apktool反编译apk包" class="headerlink" title="使用apktool反编译apk包"></a>使用apktool反编译apk包</h3><p>运行如下命令来反编译：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apktool d xxx.apk</span><br></pre></td></tr></table></figure></p>
<p>用压缩软件unzip achiever打开StabilityTest.apk，然后解压出位于根目录下的classes.dex</p>
<h3 id="使用dex2jar将classes-dex转换为jar包"><a href="#使用dex2jar将classes-dex转换为jar包" class="headerlink" title="使用dex2jar将classes.dex转换为jar包"></a>使用dex2jar将classes.dex转换为jar包</h3><p>运行如下命令来转换：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sh d2j-dex2jar.sh classes.dex</span><br></pre></td></tr></table></figure></p>
<h3 id="使用jd-gui打开classes-dex2jar-jar"><a href="#使用jd-gui打开classes-dex2jar-jar" class="headerlink" title="使用jd-gui打开classes-dex2jar.jar"></a>使用jd-gui打开classes-dex2jar.jar</h3><p>如果觉得jd-gui查看代码不方便，还可以通过File-&gt;Save All Sources导出一个classes-dex2jar.src.zip，将classes-dex2jar.src.zip解压以后，导入到Sublime阅读代码。</p>
<h3 id="修改完smali源码后，使用apktool重新打包生成apk"><a href="#修改完smali源码后，使用apktool重新打包生成apk" class="headerlink" title="修改完smali源码后，使用apktool重新打包生成apk"></a>修改完smali源码后，使用apktool重新打包生成apk</h3><p>运行如下命令来打包：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apktool b xxx.apk</span><br></pre></td></tr></table></figure></p>
<h3 id="使用sign-jar进行签名"><a href="#使用sign-jar进行签名" class="headerlink" title="使用sign.jar进行签名"></a>使用sign.jar进行签名</h3><p>运行如下命令来签名：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ java -jar sign.jar xxxx.apk</span><br></pre></td></tr></table></figure></p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/04/04/nodejs之古老的async/" class="prev">prev_post</a><a href="/2018/04/03/Docker实战/" class="next">next_post</a></div><div class="copyright"><p>© 2015 - 2018 <a href="http://reezon.github.io">reezon</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>